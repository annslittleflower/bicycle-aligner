<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="1.css">
</head>
<body>
    <div class="wrapper">
      <p style="font-size:30px">VONO ZHIVE!!!!1</p>
      <div class="item">1</div>
      <div class="item">2</div>
      <div class="item">3</div>
      <div class="item">4</div>
      <div class="item">5</div>
      <div class="item">6</div>
      <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>
            <div class="item">7</div>
      <div class="item">8</div>
      <div class="item">9</div>

    </div>

    <script type="text/javascript">


        function magicInlineGrid() {
            var hackElements = document.getElementsByClassName('hack');
            if(hackElements.length) {
                while(hackElements[0]) {
                    hackElements[0].parentNode.removeChild(hackElements[0]);
                }
            }

            var items = document.getElementsByClassName('item');

            var last = items[items.length - 1];

            var dims = last.getBoundingClientRect();

            var distanceToWindowFromFirstItem = document.getElementsByClassName('item')[0].offsetLeft;

            var distanceToWindowFromWrapper = document.getElementsByClassName('wrapper')[0].offsetLeft;

            var distanceFromElementToWrapper = distanceToWindowFromFirstItem - distanceToWindowFromWrapper;

            var generalItemWidth = dims.width;

            var currentConstainerWidth = document.getElementsByClassName('wrapper')[0].getBoundingClientRect().width;

            var containerWidthWithoutPaddings = currentConstainerWidth - (distanceFromElementToWrapper * 2);

            var numberOfElementsInOneRow = Math.round(containerWidthWithoutPaddings / generalItemWidth);

            var generalItemNumber = document.getElementsByClassName('item').length;

            var numberOfRows = generalItemNumber / numberOfElementsInOneRow;

            var isHackNeeded = Math.floor(numberOfRows) !== Math.ceil(numberOfRows);

            if(isHackNeeded) {
                var howManyElementsNeedsToBeAdded = Math.floor(Math.ceil(numberOfRows) * numberOfElementsInOneRow - generalItemNumber);
                for(var i = 0; i < howManyElementsNeedsToBeAdded; i++) {
                    var node = document.createElement("DIV");
                    node.className = 'item hack';
                    document.getElementsByClassName("wrapper")[0].appendChild(node); 
                }
            }
        }


        window.onresize = function(event) {
            magicInlineGrid()
        };

        magicInlineGrid();

    </script>
</body>
</html>
